<div class="main">
  <div class="section-table">
    <div class="containerTable">
      <span>
        <!--  <div>-->
        <!--    <button *ngIf="userRole === 'Raamatupidaja'" (click)="startInventory()" translate>Start inventory</button>-->
        <!--  </div>-->
        <button (click)="startInventory()" translate>Start inventory</button>
        <!--  <div>-->
        <!--    <button *ngIf="userRole === 'Raamatupidaja'" (click)="endInventory()" translate>End inventory</button>-->
        <!--  </div>-->
        <button (click)="endInventory()" translate>End inventory</button>
      </span>
      <div>
        <button *ngIf="selected.length > 1" (click)="checkAllOnPage()" translate>Check multiple</button>
      </div>
      <p-table
        class="styled-table"
        [value]="assets | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage, totalItems: totalElements }"
        [lazy]="true"
        [loading]="loading"
        [customSort]="true"
        [lazyLoadOnInit]="false"
        (onLazyLoad)="sortAssets($event)"
      >
        <ng-template pTemplate="header">
          <tr>
            <th></th>
            <th *ngFor="let col of headElements" pSortableColumn="{{ col.field }}" translate>
              {{ col.header }}
            </th>
            <th>Tegevused</th>
          </tr>
          <tr class="input-row" [formGroup]="filterForm">
            <td><input [checked]="allChecked()" type="checkbox" (change)="onCheckAll()" /></td>
            <td>
              <input id="float-input" formControlName="id" type="text" placeholder="Filter" class="form-control" />
            </td>
            <td><input formControlName="name" type="text" placeholder="Filter" class="form-control" /></td>
            <td>
              <input
                formControlName="buildingAbbreviationPlusRoom"
                type="text"
                placeholder="Filter"
                class="form-control"
              />
            </td>
            <td>
              <input formControlName="mainClassPlusSubclass" type="text" placeholder="Filter" class="form-control" />
            </td>
            <td><input formControlName="active" type="text" placeholder="Filter" class="form-control" /></td>
            <td><input formControlName="lifeMonthsLeft" type="text" placeholder="Filter" class="form-control" /></td>
            <td><input formControlName="checked" type="text" placeholder="Filter" class="form-control" /></td>
            <td>
              <button *ngIf="userRole === 'Raamatupidaja'" type="button" (click)="excel()" translate>
                Download Excel
              </button>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-asset>
          <tr>
            <td><input [checked]="isChecked(asset)" type="checkbox" (change)="onCheck(asset)" /></td>
            <td *ngFor="let col of headElements" translate>
              {{ asset[col.field] }}
            </td>
            <td class="buttons">
              <a
                (click)="changeSessionStorage(asset.id, 'property_detail')"
                routerLink="/property_detail/{{ asset.id }}"
              >
                Info
              </a>
              <p-button (click)="markAsPresent(asset.id)" label="OK" translate></p-button>
              <p-button (click)="markAsMissing(asset.id)" label="NOT OK" translate></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <p-footer>
        <pagination-controls (pageChange)="getPage((currentPage = $event))"></pagination-controls>
      </p-footer>
    </div>
  </div>
</div>
